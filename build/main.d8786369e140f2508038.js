(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(i)?i:String(i)),r)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formSelector=e.formSelector,this._form=n}var n,o;return n=t,(o=[{key:"enableValidation",value:function(){this._addInputListners()}},{key:"_showInputError",value:function(t){var e=this._form.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),e.textContent=t.validationMessage}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._errorClass),t.classList.remove(this._inputErrorClass),e.textContent=""}},{key:"_handleFormInput",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_toggleButton",value:function(){this._buttonSubmint=this._form.querySelector(this._submitButtonSelector),this._isFormValid=this._form.checkValidity(),this._buttonSubmint.disabled=!this._isFormValid,this._buttonSubmint.classList.toggle(this._inactiveButtonClass,!this._isFormValid)}},{key:"_addInputListners",value:function(){var t=this;this._toggleButton(),this._inputList=this._form.querySelectorAll(this._inputSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._handleFormInput(e),t._toggleButton()}))}))}},{key:"clearValidationForm",value:function(){var t=this;this._toggleButton(),this._inputList.forEach((function(e){t._hideInputError(e)}))}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var i=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._templateSelector=n,this._handleCardClic=o}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._cardElement=this._getTemplate(),this._cardElementTitle=this._cardElement.querySelector(".element__title"),this._cardElementPhoto=this._cardElement.querySelector(".element__img"),this._cardElementLike=this._cardElement.querySelector(".element__button"),this._cardElementDel=this._cardElement.querySelector(".element__basket"),this._cardElementTitle.textContent=this._name,this._cardElementPhoto.src=this._link,this._cardElementPhoto.alt=this._name,this._setEventListeners(),this._cardElement}},{key:"_likeCard",value:function(){this._cardElementLike.classList.toggle("element__button_active")}},{key:"_deliteCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"_setEventListeners",value:function(){var t=this;this._cardElementLike.addEventListener("click",(function(){return t._likeCard()})),this._cardElementDel.addEventListener("click",(function(){return t._deliteCard()})),this._cardElementPhoto.addEventListener("click",(function(){return t._handleCardClic({link:t._link,name:t._name})}))}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},u=document.querySelector(".popup_type_profile"),a=document.querySelector(".profile__edit-buton"),c=u.querySelector(".popup__form_type_profile"),s=document.querySelector(".profile-info__title"),p=document.querySelector(".profile-info__intro"),f=document.querySelector(".popup__input_type_name"),_=document.querySelector(".popup__input_type_job"),m=document.querySelector(".popup_type_place"),d=document.querySelector(".profile__add-button"),h=m.querySelector(".popup__form_type_place"),y=m.querySelector(".popup__input_type_title"),v=m.querySelector(".popup__input_type_link"),b=document.querySelector(".popup_type_image"),S=document.querySelector(".popup__img"),E=document.querySelector(".popup__name"),k=document.querySelectorAll(".popup__button-close"),x=document.querySelectorAll(".popup"),w=document.querySelector(".elements"),g=function(t){return new i(t,".template-card",q).generateCard()},q=function(t){C(b),S.src=t.link,S.alt=t.name,E.textContent=t.name};[{name:"Москва",link:"https://images.unsplash.com/photo-1512495039889-52a3b799c9bc?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},{name:"Ростов",link:"https://images.unsplash.com/photo-1661595705828-ead987797764?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1936&q=80"},{name:"Тюмень",link:"https://images.unsplash.com/photo-1621878983992-bac95a1e8dd2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2072&q=80   "},{name:"Байкал",link:"https://images.unsplash.com/photo-1490879112094-281fea0883dc?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2069&q=80"},{name:"Сибирь",link:"https://images.unsplash.com/photo-1521531105925-7c51dffd5098?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2076&q=80"},{name:"Сочи",link:"https://images.unsplash.com/photo-1549092156-04ee20673b6e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80 "}].forEach((function(t){w.append(g(t))}));var C=function(t){t.classList.add("popup_opened"),document.addEventListener("keydown",B)},L=function(t){t.classList.remove("popup_opened"),document.removeEventListener("keydown",B)},B=function(t){if("Escape"===t.key){var e=document.querySelector(".popup_opened");L(e)}};a.addEventListener("click",(function(){C(u),f.value=s.textContent,_.value=p.textContent,D.clearValidationForm()})),c.addEventListener("submit",(function(t){t.preventDefault(),s.textContent=f.value,p.textContent=_.value,L(u)})),k.forEach((function(t){t.addEventListener("click",(function(t){var e=H(t);L(e)}))})),x.forEach((function(t){t.addEventListener("click",(function(e){e.target===e.currentTarget&&L(t)}))})),d.addEventListener("click",(function(){C(m),y.value="",v.value="",V.clearValidationForm()})),h.addEventListener("submit",(function(t){t.preventDefault(),M({name:y.value,link:v.value}),t.target.reset(),L(m)}));var M=function(t){w.prepend(g(t))},H=function(t){return t.target.closest(".popup")},D=new n(l,c);D.enableValidation();var V=new n(l,h);V.enableValidation()})();